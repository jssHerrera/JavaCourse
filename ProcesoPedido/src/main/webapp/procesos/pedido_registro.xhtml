
<ui:composition template="/template/master.xhtml"
	xmlns="http://www.w3.org/1999/xhtml"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:p="http://primefaces.org/ui"
	xmlns:ui="http://java.sun.com/jsf/facelets">

	<ui:define name="title">
        .:Registro de Pedidos:.
    </ui:define>

	<ui:define name="titleCont">
		<span>Registro de Pedidos </span>
	</ui:define>

	<ui:define name="content">
		<h:form>

			<div class="row">

				<div class="col-sm-2">
					<div class="form-group">
						<h:outputLabel for="codigo" value="Código:"
							styleClass="control-label" />

						<p:inputText autocomplete="off" id="codigo" readonly="true"
							styleClass="form-control" maxlength="6" label="codigo" />
					</div>
				</div>

			</div>


			<div class="row">

				<div class="col-sm-12">
					<p:fieldset legend="Datos del cliente">
						<div class="row">
							<div class="col-sm-3">
								<h:outputLabel for="nroDocumento" value="Nro. Documento:"
									styleClass="control-labeln" />
								<p:inputText id="nroDocumento" styleClass="form-control"
									value="#{pedidoMB.cliente.nroDocumento}" maxlength="20"
									label="nroDocumento" />
							</div>
							<div class="col-sm-2">
								<span style="display: block; height: 30px;"></span>
								<p:commandButton value="Buscar"
									actionListener="#{pedidoMB.buscarClienteXNroDocumento()}"
									styleClass="btn btn-primary btn-border"
									icon="icon-magnifying-glass" ajax="true"
									update="growl,razonSocial" />
							</div>
						</div>
						<div class="row">
							<div class="form-group">
								<div class="col-sm-12">
									<h:outputLabel for="razonSocial" value="Razón Social:"
										styleClass="control-label" />

									<p:inputText autocomplete="off" readonly="true"
										id="razonSocial" value="#{pedidoMB.cliente.razonSocial}"
										styleClass="form-control" maxlength="60" label="razonSocial" />
								</div>
							</div>
						</div>
					</p:fieldset>

				</div>
			</div>


			<div class="row">
				<div class="col-sm-12">
					<span style="display: block; height: 15px;"></span>
					<div class="form-group table-responsive box-table-class">

						<p:dataTable id="detallePedido" var="detallePedido"
							value="#{pedidoMB.pedidoCabecera.listaPedidoDetalle}"
							rowKey="#{detallePedido.id}" paginator="true"
							paginatorPosition="top" rowsPerPageTemplate="5,10,20" rows="10"
							styleClass="table table-bordered"
							emptyMessage="No existen registros" rowIndexVar="item"
							style="margin-bottom:0">

							<p:column headerText="Item" style="width:40px;text-align:center">
								<h:outputText value="#{item + 1}" />
							</p:column>

							<p:column headerText="Código Producto"
								style="width:80px;text-align:center">
								<h:outputText value="#{detallePedido.producto.id}" />
							</p:column>

							<p:column headerText="Nombre Producto">
								<h:outputText value="#{detallePedido.producto.nombre}" />
							</p:column>

							<p:column headerText="Precio"
								style="width:120px;text-align:right">
								<h:outputText value="#{detallePedido.precio}" />
							</p:column>

							<p:column headerText="Cantidad"
								style="width:120px;text-align:right">
								<h:outputText value="#{detallePedido.cantidad}" />
							</p:column>

							<p:column headerText="SubTotal"
								style="width:120px;text-align:right">
								<h:outputText value="#{detallePedido.subTotal}" />
							</p:column>

							<p:column headerText="Accion"
								style="width:120px;text-align:center" exportable="false">
							</p:column>
						</p:dataTable>
					</div>

				</div>


			</div>


			<div class="row">
				<div class="col-sm-10" style="text-align: right; margin-top: 5px">
					<h:outputLabel for="subTotal" value="Sub Total:"
						styleClass="control-labeln" />
				</div>
				<div class="col-sm-2" style="text-align: right">
					<p:inputText id="subTotal" styleClass="form-control"
						style="text-align: right"
						value="#{pedidoMB.pedidoCabecera.subTotal}" maxlength="20"
						readonly="true" label="subTotal" />
				</div>
			</div>

			<div class="row">
				<div class="col-sm-10" style="text-align: right; margin-top: 5px">
					<h:outputLabel for="descuento" value="Descuento:"
						styleClass="control-labeln" />
				</div>
				<div class="col-sm-2" style="text-align: right">
					<p:inputText id="descuento" styleClass="form-control"
						style="text-align: right"
						value="#{pedidoMB.pedidoCabecera.descuento}" maxlength="20"
						readonly="false" label="descuento" />
				</div>
			</div>

			<div class="row">
				<div class="col-sm-10" style="text-align: right; margin-top: 5px">
					<h:outputLabel for="igv" value="IGV:" styleClass="control-labeln" />
				</div>
				<div class="col-sm-2" style="text-align: right">
					<p:inputText id="igv" styleClass="form-control"
						style="text-align: right" value="#{pedidoMB.pedidoCabecera.igv}"
						maxlength="20" readonly="true" label="igv" />
				</div>
			</div>

			<div class="row">
				<div class="col-sm-10" style="text-align: right; margin-top: 5px">
					<h:outputLabel for="total" value="Total:"
						styleClass="control-labeln" />
				</div>
				<div class="col-sm-2" style="text-align: right">
					<p:inputText id="total" styleClass="form-control"
						style="text-align: right" value="#{pedidoMB.pedidoCabecera.total}"
						maxlength="20" readonly="true" label="total" />
				</div>
			</div>
			<div class="row">
				<div class="col-sm-6 text-left">
					<div class="form-group box-main-btn">
						<span style="display: block; height: 30px;"></span>
						<p:commandButton value="Limpiar"
							actionListener="#{pedidoMB.limpiar()}"
							styleClass="btn btn-default" icon="icon-eraser" ajax="false"
							update="detallePedido,subTotal,igv,total" />
						<p:commandButton value="Actualizar"
							actionListener="#{pedidoMB.actualizar()}"
							styleClass="btn btn-primary btn-border"
							icon="icon-magnifying-glass" ajax="true"
							update="detallePedido,subTotal,igv,total" />

						<p:commandButton value="Nuevo" action="#{pedidoMB.nuevo()}"
							styleClass="btn btn-warning" icon="icon-add-to-list"
							update="detallePedido,subTotal,igv,total" ajax="false" />

					</div>
				</div>
			</div>

			<div class="row">
				<div class="col-sm-6 text-right">
					<p:confirmDialog id="idconfirmDlgBuscarProducto"
						widgetVar="confirmDlgBuscarProducto" header="Buscar productos"
						message="xxxx"
						style="‎display: block;margin-top:250px;margin-left:450px">



					</p:confirmDialog>
				</div>
			</div>


			<p:growl id="growl" sticky="true" showDetail="true" life="3000" />

		</h:form>
	</ui:define>

	<ui:define name="footerCont">
		<script type="text/javascript" charset="utf-8">
			$("#sidebar li").removeClass("active");
			$("#sidebar-2").addClass("active");
		</script>
	</ui:define>
</ui:composition>